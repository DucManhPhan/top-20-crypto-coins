.PHONY: test install-deps build-layer terraform-init terraform-plan terraform-apply terraform-destroy clean\n\n# Test commands\ntest:\n\tpython -m pytest tests/ -v\n\ntest-coverage:\n\tpip install coverage\n\tcoverage run -m pytest tests/\n\tcoverage report --show-missing\n\n# Development setup\ninstall-deps:\n\tpip install -r tests/requirements.txt\n\n# Lambda layer build\nbuild-layer:\n\tcd infra/lambda/lambda-layer && \\\n\tmkdir -p python && \\\n\tpython -m pip install -r requirements.txt -t python/\n\n# Terraform commands\nterraform-init:\n\tcd infra/base-deployment && terraform init\n\nterraform-plan:\n\tcd infra/base-deployment && terraform plan\n\nterraform-apply:\n\tcd infra/base-deployment && terraform apply\n\nterraform-destroy:\n\tcd infra/base-deployment && terraform destroy\n\n# Cleanup\nclean:\n\trm -rf infra/lambda/lambda-layer/python/\n\trm -f infra/lambda/lambda-layer.zip\n\trm -f infra/base-deployment/top_20_crypto_coins.zip\n\tfind . -name \"__pycache__\" -type d -exec rm -rf {} +\n\tfind . -name \"*.pyc\" -delete